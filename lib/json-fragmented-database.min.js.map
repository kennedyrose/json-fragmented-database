{"version":3,"sources":["lib/node_modules/browser-pack/_prelude.js","lib/lib/get.js","lib/node_modules/es6-promise/dist/es6-promise.js","lib/node_modules/process/browser.js"],"names":[],"mappings":"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","file":"json-fragmented-database.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function (root, factory) {\n\t'use strict'\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine([], factory)\n\t}\n\telse if (typeof exports === 'object') {\n\t\tmodule.exports = factory()\n\t}\n\telse {\n\t\troot.jsonFragmentedDatabase = factory()\n\t}\n}(this, function(){\n\t'use strict'\n\tfunction getInfo(opt){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconsole.log('Getting info...')\n\t\t\tif(opt.info) return resolve(opt)\n\t\t\tgetJson(`${opt.dir}/info.json`)\n\t\t\t\t.then(obj => {\n\t\t\t\t\topt.info = obj\n\t\t\t\t\tresolve(opt)\n\t\t\t\t})\n\t\t\t\t.catch(reject)\n\t\t})\n\t}\n\n\tfunction getData(opt){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconsole.log('Getting data...')\n\t\t\tconst found = []\n\t\t\tlet cursor = opt.offset\n\t\t\topt.info.lastFileTotal\n\t\t\tfunction getBatch(){\n\t\t\t\tlet file\n\t\t\t\t// Find which file pointer is pointing to\n\t\t\t\tif(cursor > (opt.info.lastFile * opt.info.entriesPerFile)){\n\t\t\t\t\tfile = opt.info.lastFile\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tfile = Math.floor(opt.info.entriesPerFile / cursor)\n\t\t\t\t}\n\t\t\t\tgetJson(`${opt.dir}/${file}.json`)\n\t\t\t\t\t.then(arr => {\n\t\t\t\t\t\tlet inFileCursor = file * opt.info.entriesPerFile\n\t\t\t\t\t\tfor(let i = arr.length; i--;){\n\t\t\t\t\t\t\tif(cursor === inFileCursor){\n\t\t\t\t\t\t\t\tif(found.length < opt.limit){\n\t\t\t\t\t\t\t\t\tfound.push(arr[i])\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcursor--\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinFileCursor--\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(found.length < opt.limit){\n\t\t\t\t\t\t\tfile--\n\t\t\t\t\t\t\tif(file > 0){\n\t\t\t\t\t\t\t\treturn getBatch()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(found)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(reject)\n\t\t\t}\n\t\t})\n\t}\n\n\n\tfunction getJson(file){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst xhr = new XMLHttpRequest()\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\tif(xhr.responseText) console.log(xhr.responseText)\n\t\t\t\tif(this.readyState == 4 && this.status == 200){\n\t\t\t\t\tresolve(JSON.parse(xhr.responseText))\n\t\t\t\t}\n\t\t\t}\n\t\t\txhr.open('get', file, true)\n\t\t\txhr.send()\n\t\t})\n\t}\n\n\n\treturn function(opt, done){\n\t\tif(typeof opt !== 'object') opt = {}\n\t\tif(typeof opt === 'function') done = opt\n\t\topt = Object.assign({\n\t\t\tdir: 'data',\n\t\t\tlimit: 30,\n\t\t\toffset: 0\n\t\t}, opt)\n\n\t\tgetInfo(opt)\n\t\t\t.then(getData)\n\t\t\t.then(ret => {\n\t\t\t\tconsole.log('Done!')\n\t\t\t\tdone(ret)\n\t\t\t})\n\t\t\t.catch(console.error)\n\t}\n}))\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.1.0\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n      GET_THEN_ERROR.error = null;\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvZ2V0LmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUNBQyxXQUFVLElBQVYsRUFBZ0IsT0FBaEIsRUFBeUI7QUFDekI7O0FBQ0EsS0FBSSxPQUFPLE1BQVAsS0FBa0IsVUFBbEIsSUFBZ0MsT0FBTyxHQUEzQyxFQUFnRDtBQUMvQyxTQUFPLEVBQVAsRUFBVyxPQUFYO0FBQ0EsRUFGRCxNQUdLLElBQUksUUFBTyxPQUFQLHlDQUFPLE9BQVAsT0FBbUIsUUFBdkIsRUFBaUM7QUFDckMsU0FBTyxPQUFQLEdBQWlCLFNBQWpCO0FBQ0EsRUFGSSxNQUdBO0FBQ0osT0FBSyxzQkFBTCxHQUE4QixTQUE5QjtBQUNBO0FBQ0QsQ0FYQSxhQVdPLFlBQVU7QUFDakI7O0FBQ0EsVUFBUyxPQUFULENBQWlCLEdBQWpCLEVBQXFCO0FBQ3BCLFNBQU8sYUFBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3ZDLFdBQVEsR0FBUixDQUFZLGlCQUFaO0FBQ0EsT0FBRyxJQUFJLElBQVAsRUFBYSxPQUFPLFFBQVEsR0FBUixDQUFQO0FBQ2IsV0FBVyxJQUFJLEdBQWYsaUJBQ0UsSUFERixDQUNPLGVBQU87QUFDWixRQUFJLElBQUosR0FBVyxHQUFYO0FBQ0EsWUFBUSxHQUFSO0FBQ0EsSUFKRixFQUtFLEtBTEYsQ0FLUSxNQUxSO0FBTUEsR0FUTSxDQUFQO0FBVUE7O0FBRUQsVUFBUyxPQUFULENBQWlCLEdBQWpCLEVBQXFCO0FBQ3BCLFNBQU8sYUFBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3ZDLFdBQVEsR0FBUixDQUFZLGlCQUFaO0FBQ0EsT0FBTSxRQUFRLEVBQWQ7QUFDQSxPQUFJLFNBQVMsSUFBSSxN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QSxRQUFRLElBQVIsR0FBZSxJQUFmO0FBQ0EsUUFBUSxlQUFSLEdBQTBCLElBQTFCO0FBQ0EsUUFBUSxtQkFBUixHQUE4QixJQUE5Qjs7QUFFQSxRQUFRLFNBQVIsR0FBb0IsVUFBVSxJQUFWLEVBQWdCO0FBQUUsV0FBTyxFQUFQO0FBQVcsQ0FBakQ7O0FBRUEsUUFBUSxPQUFSLEdBQWtCLFVBQVUsSUFBVixFQUFnQjtBQUM5QixVQUFNLElBQUksS0FBSixDQUFVLGtDQUFWLENBQU47QUFDSCxDQUZEOztBQUlBLFFBQVEsR0FBUixHQUFjLFlBQVk7QUFBRSxXQUFPLEdBQVA7QUFBWSxDQUF4QztBQUNBLFFBQVEsS0FBUixHQUFnQixVQUFVLEdBQVYsRUFBZTtBQUMzQixVQUFNLElBQUksS0FBSixDQUFVLGdDQUFWLENBQU47QUFDSCxDQUZEO0FBR0EsUUFBUSxLQUFSLEdBQWdCLFlBQVc7QUFBRSxXQUFPLENBQVA7QUFBVyxDQUF4QyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcblx0J3VzZSBzdHJpY3QnXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpXG5cdH1cblx0ZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KClcblx0fVxuXHRlbHNlIHtcblx0XHRyb290Lmpzb25GcmFnbWVudGVkRGF0YWJhc2UgPSBmYWN0b3J5KClcblx0fVxufSh0aGlzLCBmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCdcblx0ZnVuY3Rpb24gZ2V0SW5mbyhvcHQpe1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZygnR2V0dGluZyBpbmZvLi4uJylcblx0XHRcdGlmKG9wdC5pbmZvKSByZXR1cm4gcmVzb2x2ZShvcHQpXG5cdFx0XHRnZXRKc29uKGAke29wdC5kaXJ9L2luZm8uanNvbmApXG5cdFx0XHRcdC50aGVuKG9iaiA9PiB7XG5cdFx0XHRcdFx0b3B0LmluZm8gPSBvYmpcblx0XHRcdFx0XHRyZXNvbHZlKG9wdClcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKHJlamVjdClcblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RGF0YShvcHQpe1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZygnR2V0dGluZyBkYXRhLi4uJylcblx0XHRcdGNvbnN0IGZvdW5kID0gW11cblx0XHRcdGxldCBjdXJzb3IgPSBvcHQub2Zmc2V0XG5cdFx0XHRvcHQuaW5mby5sYXN0RmlsZVRvdGFsXG5cdFx0XHRmdW5jdGlvbiBnZXRCYXRjaCgpe1xuXHRcdFx0XHRsZXQgZmlsZVxuXHRcdFx0XHQvLyBGaW5kIHdoaWNoIGZpbGUgcG9pbnRlciBpcyBwb2ludGluZyB0b1xuXHRcdFx0XHRpZihjdXJzb3IgPiAob3B0LmluZm8ubGFzdEZpbGUgKiBvcHQuaW5mby5lbnRyaWVzUGVyRmlsZSkpe1xuXHRcdFx0XHRcdGZpbGUgPSBvcHQuaW5mby5sYXN0RmlsZVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0ZmlsZSA9IE1hdGguZmxvb3Iob3B0LmluZm8uZW50cmllc1BlckZpbGUgLyBjdXJzb3IpXG5cdFx0XHRcdH1cblx0XHRcdFx0Z2V0SnNvbihgJHtvcHQuZGlyfS8ke2ZpbGV9Lmpzb25gKVxuXHRcdFx0XHRcdC50aGVuKGFyciA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgaW5GaWxlQ3Vyc29yID0gZmlsZSAqIG9wdC5pbmZvLmVudHJpZXNQZXJGaWxlXG5cdFx0XHRcdFx0XHRmb3IobGV0IGkgPSBhcnIubGVuZ3RoOyBpLS07KXtcblx0XHRcdFx0XHRcdFx0aWYoY3Vyc29yID09PSBpbkZpbGVDdXJzb3Ipe1xuXHRcdFx0XHRcdFx0XHRcdGlmKGZvdW5kLmxlbmd0aCA8IG9wdC5saW1pdCl7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3VuZC5wdXNoKGFycltpXSlcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Y3Vyc29yLS1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpbkZpbGVDdXJzb3ItLVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoZm91bmQubGVuZ3RoIDwgb3B0LmxpbWl0KXtcblx0XHRcdFx0XHRcdFx0ZmlsZS0tXG5cdFx0XHRcdFx0XHRcdGlmKGZpbGUgPiAwKXtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZ2V0QmF0Y2goKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGZvdW5kKVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKHJlamVjdClcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblxuXHRmdW5jdGlvbiBnZXRKc29uKGZpbGUpe1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZih4aHIucmVzcG9uc2VUZXh0KSBjb25zb2xlLmxvZyh4aHIucmVzcG9uc2VUZXh0KVxuXHRcdFx0XHRpZih0aGlzLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnN0YXR1cyA9PSAyMDApe1xuXHRcdFx0XHRcdHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0eGhyLm9wZW4oJ2dldCcsIGZpbGUsIHRydWUpXG5cdFx0XHR4aHIuc2VuZCgpXG5cdFx0fSlcblx0fVxuXG5cblx0cmV0dXJuIGZ1bmN0aW9uKG9wdCwgZG9uZSl7XG5cdFx0aWYodHlwZW9mIG9wdCAhPT0gJ29iamVjdCcpIG9wdCA9IHt9XG5cdFx0aWYodHlwZW9mIG9wdCA9PT0gJ2Z1bmN0aW9uJykgZG9uZSA9IG9wdFxuXHRcdG9wdCA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdFx0ZGlyOiAnZGF0YScsXG5cdFx0XHRsaW1pdDogMzAsXG5cdFx0XHRvZmZzZXQ6IDBcblx0XHR9LCBvcHQpXG5cblx0XHRnZXRJbmZvKG9wdClcblx0XHRcdC50aGVuKGdldERhdGEpXG5cdFx0XHQudGhlbihyZXQgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnRG9uZSEnKVxuXHRcdFx0XHRkb25lKHJldClcblx0XHRcdH0pXG5cdFx0XHQuY2F0Y2goY29uc29sZS5lcnJvcilcblx0fVxufSkpXG4iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDQuMS4wXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIEdFVF9USEVOX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJCA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlLmVycm9yID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgX3JlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICB2YXIgX2lucHV0ID0gdGhpcy5faW5wdXQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX2VhY2hFbnRyeShfaW5wdXRbaV0sIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJCA9IGMucmVzb2x2ZTtcblxuICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XG4gICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xuICAgICAgfSksIGkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlLmFsbCA9IGFsbDtcblByb21pc2UucmFjZSA9IHJhY2U7XG5Qcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XG5Qcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcblByb21pc2UuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFByb21pc2UsXG5cbiAgLyoqXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQ2hhaW5pbmdcbiAgICAtLS0tLS0tLVxuICBcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICB9KTtcbiAgXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gICAgfSk7XG4gICAgYGBgXG4gICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFzc2ltaWxhdGlvblxuICAgIC0tLS0tLS0tLS0tLVxuICBcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBTaW1wbGUgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCByZXN1bHQ7XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xuICBcbiAgICB0cnkge1xuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gIFxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgXG4gICAgfVxuICBcbiAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICBcbiAgICB9XG4gIFxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZEF1dGhvcigpLlxuICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCB0aGVuXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gIHRoZW46IHRoZW4sXG5cbiAgLyoqXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIFxuICAgIGBgYGpzXG4gICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gICAgfVxuICBcbiAgICAvLyBzeW5jaHJvbm91c1xuICAgIHRyeSB7XG4gICAgICBmaW5kQXV0aG9yKCk7XG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfVxuICBcbiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGNhdGNoXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQKSB7XG4gICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlO1xufVxuXG4vLyBTdHJhbmdlIGNvbXBhdC4uXG5Qcm9taXNlLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuXG5yZXR1cm4gUHJvbWlzZTtcblxufSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiJdfQ=="}